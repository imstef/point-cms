$(document).ready(function(){setTimeout(function(){$("body").removeClass("preload");},200);var nav_elems=[];var sections=[];var main_nav_item;var first_nav_item;var last_nav_item;var top_limit=100;var manual_nav=false;$('.main-nav-item').each(function(){nav_elems.push($(this));});$.each(nav_elems,function(i,obj){var li_num=i+1;obj.addClass('item-'+li_num);});$('.site-section').each(function(i){sections.push($(this).attr('id'));$(this).addClass('section-'+ ++i);});first_nav_item=1;last_nav_item=sections.length;main_nav_item=$('.main-nav-item');main_nav_item.on('click',function(){manual_nav=true;main_nav_item.each(function(){main_nav_item.removeClass('current-nav-item');});$(this).addClass('current-nav-item');});$(window).scroll(function(){var scrollY=$(window).scrollTop();var win_height=$(window).height();var bottom_reached=scrollY+win_height==$(document).height();var nav=$('.header-wrapper');if(scrollY>10){nav.fadeIn(450);}else{nav.fadeOut(450);}
if(manual_nav){manual_nav=false;}else{if(scrollY<top_limit){$('.item-'+first_nav_item).addClass('current-nav-item');$('.main-nav-item:not(.item-'+first_nav_item).each(function(){$(this).removeClass('current-nav-item');});return;}
for(var i=0;i<sections.length;i++){var nav_item=i+1;if(isVisible('#'+sections[i])){$('.item-'+nav_item).addClass('current-nav-item');$('.main-nav-item:not(.item-'+nav_item+')').each(function(i,obj){$(this).removeClass('current-nav-item');});}}
if(bottom_reached){$('.item-'+last_nav_item).addClass('current-nav-item');$('.main-nav-item:not(.item-'+last_nav_item+')').each(function(i,obj){$(this).removeClass('current-nav-item');});return;}}});var portfolio_items=[];$('.item-content').hover(function(){$(this).find('.item-preview').fadeIn(350);},function(){$(this).find('.item-preview').fadeOut(350);});$('.item-toggle-modal:not(.inverse-icon)').each(function(){portfolio_items.push($(this).data("mod"));});$('.item-toggle-modal').on('click',function(){$('.item-preview-modal').fadeToggle();$('.modal-wrapper').toggleClass('open');$('body').toggleClass('no-scroll');$('.item-preview').css({'display':'none'});var portfolio_item=$(this).data("mod");$.each(portfolio_items,function(i,obj){if(obj===portfolio_item){$('.'+obj).fadeIn();}else{$('.'+obj).css({'display':'none'});}});});$(window).on('click',function(e){if(e.target==$('.item-preview-modal')[0]){$(".item-preview-modal").css({'display':'none'});$('.modal-wrapper').removeClass('open');$('body').removeClass('no-scroll');}});$(document).keyup(function(e){if(e.keyCode===27){$(".item-preview-modal").css({'display':'none'});$('.modal-wrapper').removeClass('open');$('body').removeClass('no-scroll');}});var portfolio_sections=[];var portfolio_section_items_count=[];var portfolio_nav_items=[];var portfolio_nav_item_names=[];$('.portfolio-nav-item').each(function(i){portfolio_nav_items.push($(this));portfolio_nav_item_names.push($(this).text());$(this).addClass('portfolio-nav-item-'+ ++i);});$('.portfolio-section').each(function(i){portfolio_sections.push($(this));});$('.portfolio-section').each(function(i){$(this).addClass('section-'+portfolio_nav_item_names[i]);});for(var i=0;i<portfolio_sections.length;i++){var count=$('.section-'+portfolio_nav_item_names[i]).find('.column-4').length;portfolio_section_items_count.push(count);if(i==0){portfolio_nav_items[i].addClass('current-nav-item');portfolio_sections[i].fadeIn();}}
$('.portfolio-section').each(function(i){$(this).attr("data-numitems",portfolio_section_items_count[i]);});$.each(portfolio_sections,function(i,obj){var section_items=parseInt(portfolio_section_items_count[i]);switch(section_items){case 2:obj.find('.column-4').addClass('column-6');break;case 1:obj.find('.column-4').addClass('column-12');break;}});$('.portfolio-nav-item').on('click',function(){$('.portfolio-nav-item').each(function(){$(this).removeClass('current-nav-item');});$(this).addClass('current-nav-item');$.each(portfolio_sections,function(i,obj){if(portfolio_nav_items[i].hasClass('current-nav-item')){obj.fadeIn();}else{obj.css({'display':'none'});}});});});function isVisible(el){var scrollPosition=$(window).scrollTop();var windowHeight=$(window).height();var elementTop=$(el).offset().top;var elementHeight=$(el).height();var elementBottom=elementTop+elementHeight;return((elementBottom-elementHeight*0.25>scrollPosition)&&(elementTop<(scrollPosition+0.5*windowHeight)));}