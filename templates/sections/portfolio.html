
{% block body %}
    
     {% set info = execute_query("SELECT title, description FROM template_portfolio JOIN section_list USING(sid) WHERE class_id = '%s'" % class_id) %}

    <h1 class="section-title">{{ info[0]["title"] }}</h1>
    <h4 class="section-description">{{ info[0]["description"] }}</h4>
    <div class="nav-wrapper portfolio-nav ">
        <nav>
            {% set categories = execute_query("SELECT category FROM template_portfolio_categories ORDER BY position") %}
            <ul>
                {% for i in range (0, categories | length) %}
                    <li class="nav-item portfolio-nav-item">{{ categories[i]["category"] }}</li>
                {% endfor %}
            </ul>
        </nav>
    </div>

    <div class="item-preview-modal">
        <div class="modal-wrapper">
            <span class="icon icon-cancel-circle item-toggle-modal inverse-icon"></span>

            {% set query =  "SELECT tpc.category, tpp.title, tpp.description, tpp.logo, tpp.modal_content, tpp.technologies FROM template_portfolio JOIN section_list sl USING (sid) JOIN template_portfolio_projects tpp USING(tpid) JOIN template_portfolio_categories tpc USING (cid) WHERE class_id = '%s' ORDER BY tpc.position" % class_id %}

            {% set data = execute_query(query) %} 

            {% for i in range(0, data | length) %}
                {% set temp = i + 1 %}
                <div class="project-{{ temp }}">
                    <div class="modal-header">
                        <h1 class="project-title">{{ data[i]["title"] }}</h1>
                    </div>
                    <div class="modal-content align-left">
                        {{ data[i]["modal_content"] | safe }}
                    </div>
                </div>
                <!--<div class="modal-footer">
                    <div class="link-github align-center"><a href="#"><span class="icon icon-github inverse-icon"></span></a></div>
                </div>-->
            {% endfor %}
        </div>
    </div>

    <div class="section-content">
        {% set project_numb = [1] %}
        {% for i in range(0, categories | length) %}
            <div class="portfolio-section" data-numitems="1">
                {% for j in range(0, data | length) %}
                    {% if categories[i]["category"] == data[j]["category"] %}
                        <div class="column-4">
                            <div class="section-item display-table">
                                <div class="item-content-wrapper display-table-cell">
                                    <div class="item-title">{{ data[j]["title"] }}</div>
                                    <div class="item-logo">{{ data[j]["logo"] }}</div>
                                    <div class="item-preview">
                                        <span class="icon icon-circle-up item-toggle-modal" data-mod="project-{{ project_numb[0] }}"></span>
                                        <div class="item-preview-content">
                                            <div class="item-title">{{ data[j]["title"] }}</div>
                                            <div class="item-description">{{ data[j]["description"] }}</div>
                                            <div class="item-tech-stack">
                                                <div class="tech-stack-title">
                                                    <span class="icon icon-stack"></span><span class="tech-stack-title-text">Tech Stack</span>
                                                </div>
                                                <span class="tech-stack-icon lang-php">PHP</span>
                                                <span class="tech-stack-icon lang-js">JS</span>
                                                <span class="tech-stack-icon lang-python">Python</span>
                                                <span class="tech-stack-icon lang-java">Java</span>
                                                <span class="tech-stack-icon lang-csharp">C#</span>
                                            </div>
                                            <div class="link-github"><a href="#" target="_blank"><span class="icon icon-github"></span></a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% if project_numb.append(project_numb.pop() + 1) %}{% endif %}
                    {% endif %}

                {% endfor %}
               <div class="clearfix"></div>
            </div>
        {% endfor %}

    </div>


{% endblock %}
